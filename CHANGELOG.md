# 更新說明

## 📅 v1.2.0 - 2025年10月21日

### 🎮 核心遊戲機制大改版

#### ⚔️ 戰鬥系統重新設計
- **敵人行為改變**：敵人不再直接衝撞玩家，改為保持距離並發射子彈
- **新增子彈系統**：敵人會在射程內發射紅色子彈攻擊玩家
- **隕石系統**：每關都會有大、中、小隕石從四周飛過來
- **統一傷害機制**：所有攻擊（子彈、隕石碰撞）傷害統一為 **1**

#### 💪 平衡性調整
- **玩家血量上限**：100 → **10**（最大升級上限）
- **血量升級**：每級 +5 → **+1**
- **初始攻擊力**：15 DPS（能在 2 秒內擊敗最弱敵人）
- **敵人血量**：
  - 基礎敵人：40 → **30**（2秒可擊敗）
  - 快速敵人：30 → **25**
  - 坦克敵人：150 → **100**
  - BOSS：400 → **300**
- **隕石血量**：
  - 小型：15 → **30**（2秒可擊敗）
  - 中型：40 → **60**
  - 大型：100 → **120**

#### 🎯 敵人射擊參數
- **基礎敵人**：射程 150，停止距離 120，間隔 2.0 秒
- **快速敵人**：射程 140，停止距離 100，間隔 1.5 秒
- **坦克敵人**：射程 180，停止距離 150，間隔 2.5 秒
- **BOSS**：射程 200，停止距離 180，間隔 1.0 秒

#### 🌠 隕石系統
- 每 3 秒生成一個隨機大小的隕石
- 隕石從螢幕四周邊緣飛入
- 小型隕石數量最多，大型最少
- 隕石會旋轉並自然飛行，不追蹤玩家
- 擊毀隕石也能獲得代幣獎勵

### � 技術改進
- 新增 `Bullet.js` 實體類別（敵人子彈）
- 新增 `Asteroid.js` 實體類別（隕石）
- 新增 `AsteroidManager.js` 系統（隕石管理）
- 重構 `Enemy.js` 加入射擊行為和停止距離邏輯
- 重構 `GameScene.js` 整合新碰撞系統
- 武器系統現在可同時攻擊敵人和隕石

---

## 📅 v1.1.0 - 2025年10月21日

## 🎯 主要變更

### 1. RWD 響應式設計 ✨
**從桌面優先改為手機優先**

#### 畫布尺寸
- ❌ 舊版：1280x720 (16:9 橫向)
- ✅ 新版：375x667 (9:16 豎立)

#### 縮放模式
- ❌ 舊版：`Phaser.Scale.FIT` (固定比例縮放)
- ✅ 新版：`Phaser.Scale.RESIZE` (響應式自適應)

#### CSS 佈局
- ❌ 舊版：flex 居中固定
- ✅ 新版：100vw/100vh 全螢幕

### 2. 遊戲時間調整 ⏱️
**快節奏遊戲體驗**

#### 關卡時間
- ❌ 舊版：
  - 關卡 1：120 秒（BOSS 40秒）
  - 關卡 2：150 秒（BOSS 50秒）
  - 關卡 3：180 秒（BOSS 60秒）
  
- ✅ 新版：
  - **所有關卡：30 秒（BOSS 15秒）**

#### 遊戲節奏
- 更快的遊戲循環
- 適合碎片時間遊玩
- 提高遊戲緊張感

### 3. UI 優化 🎨
**適應手機豎立螢幕**

#### 主選單
- 標題字體：72px → 48px
- 副標題：32px → 24px
- 按鈕大小：300x60 → 250x55
- 垂直佈局優化

#### 升級商店
- 標題：48px → 32px
- 卡片佈局：3列 → 1列垂直
- 卡片高度：140px → 100px
- 更適合手機滾動

#### 關卡選擇
- 標題：48px → 32px
- 卡片寬度：700px → 340px
- 卡片高度：120px → 110px
- 元素位置緊湊化

#### 遊戲內 UI
- 時間顯示：32px → 24px
- HP/代幣：24px → 18px
- 位置微調適應小螢幕

#### 結算畫面
- 面板寬度：700px → 340px
- 標題：48px → 36px
- 按鈕：200x50 → 140x45
- 獎勵計算佈局優化

### 4. 觸控優化 📱
**提升手機操作體驗**

#### HTML Meta 標籤
```html
viewport-fit=cover
maximum-scale=1.0
user-scalable=no
```

#### CSS 觸控屬性
```css
touch-action: none
position: fixed
```

#### 遊戲設定
- 支援觸控拖曳
- 防止頁面滾動
- 全螢幕沉浸體驗

## 📁 修改的檔案

### 核心設定 (4 個)
1. `src/utils/constants.js` - 畫布尺寸常數
2. `src/config.js` - Phaser 縮放模式
3. `index.html` - HTML 與 CSS
4. `vite.config.js` - 構建設定

### 場景檔案 (6 個)
5. `src/scenes/MainMenuScene.js` - 主選單 UI
6. `src/scenes/UpgradeShopScene.js` - 升級商店佈局
7. `src/scenes/LevelSelectScene.js` - 關卡選擇 UI
8. `src/scenes/GameScene.js` - 遊戲時間設定
9. `src/scenes/UIScene.js` - 遊戲內 UI
10. `src/scenes/ResultScene.js` - 結算面板

### 設定檔案 (1 個)
11. `public/assets/data/levels.json` - 關卡時間與尺寸

### 文件 (2 個)
12. `README.md` - 專案說明更新
13. `TESTING.md` - 測試指南更新

**總計：13 個檔案修改**

## 🧪 測試重點

### 手機測試
1. ✅ 在手機瀏覽器中開啟遊戲
2. ✅ 檢查畫面是否正確縮放
3. ✅ 測試觸控拖曳控制
4. ✅ 確認 UI 不會超出螢幕
5. ✅ 測試遊戲流程

### 桌面測試
1. ✅ 使用 F12 開發者工具
2. ✅ 切換到手機模式
3. ✅ 選擇不同裝置預設
4. ✅ 測試不同解析度

### 時間測試
1. ✅ 確認關卡時間為 30 秒
2. ✅ 確認 BOSS 15 秒出現
3. ✅ 測試時間增加道具
4. ✅ 確認時間到會失敗

## 🎮 使用建議

### 最佳體驗
- **裝置**：手機或平板
- **方向**：豎立螢幕
- **瀏覽器**：Chrome / Safari
- **網路**：任何網路環境

### 桌面體驗
如果在桌面上測試：
1. 開啟瀏覽器開發者工具（F12）
2. 點擊手機圖示切換到裝置模式
3. 選擇手機裝置（如 iPhone 12 Pro）
4. 重新整理頁面

### 觸控模擬
桌面瀏覽器的裝置模式支援：
- 滑鼠拖曳 = 觸控拖曳
- 滑鼠點擊 = 觸控點擊

## 📊 效能影響

### 記憶體使用
- ✅ 減少：畫布更小 (375x667 vs 1280x720)
- ✅ 減少：UI 元素更精簡

### 渲染效能
- ✅ 提升：更少的像素需要渲染
- ✅ 提升：適合中低階手機

### 遊戲體驗
- ✅ 更快：30 秒快節奏
- ✅ 更刺激：更短的反應時間
- ✅ 更適合碎片時間

## 🔄 向後相容性

### LocalStorage 資料
- ✅ 完全相容
- ✅ 舊版存檔可直接使用
- ✅ 代幣和升級不受影響

### 遊戲機制
- ✅ 所有功能保持不變
- ✅ 只調整 UI 和時間
- ✅ 遊戲邏輯完全相同

## 🚀 部署建議

### 正式環境
```bash
# 建構生產版本
npm run build

# 部署到靜態主機
# Netlify, Vercel, GitHub Pages 等
```

### PWA 支援（未來）
- 可以加入 Service Worker
- 支援離線遊玩
- 加入桌面圖示

## 📝 已知問題

### 無
目前沒有已知的重大問題

### 未來改進
- [ ] 加入橫向模式支援（選擇性）
- [ ] 優化更多螢幕尺寸
- [ ] 加入觸覺回饋（震動）

## 💡 開發筆記

### 設計決策
1. **為什麼選擇 9:16？**
   - 符合現代手機標準比例
   - iPhone、Android 主流尺寸
   - 最大化手機螢幕使用

2. **為什麼改為 30 秒？**
   - 適合碎片時間遊玩
   - 提高遊戲節奏
   - 增加重玩性

3. **為什麼使用 RESIZE 模式？**
   - 自動適應各種螢幕
   - 避免黑邊
   - 更好的沉浸體驗

### 技術挑戰
1. **UI 元素重新排列**
   - 從橫向 3 列改為豎向 1 列
   - 所有文字大小需要調整
   - 間距需要重新計算

2. **觸控區域優化**
   - 確保按鈕夠大
   - 避免誤觸
   - 適當的間距

3. **響應式測試**
   - 測試多種裝置
   - 確保各種解析度都正常
   - CSS 優化

## 🎉 結論

這次更新將遊戲從**桌面優先**轉變為**手機優先**，大幅提升了手機遊玩體驗。

**主要成就**：
- ✅ 完整的 RWD 支援
- ✅ 手機豎立模式優化
- ✅ 快節奏遊戲體驗（30秒）
- ✅ UI 全面優化
- ✅ 觸控體驗提升

**遊戲現在更適合手機遊玩！** 📱🎮

---

**版本**：v1.1.0  
**日期**：2025年10月21日  
**狀態**：✅ 完成
